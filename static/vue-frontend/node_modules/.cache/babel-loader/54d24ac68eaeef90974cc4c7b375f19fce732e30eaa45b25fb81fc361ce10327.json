{"ast":null,"code":"import { ref, onMounted, watch, computed } from 'vue';\n// We're removing the Chart.js import and using the CDN version\n\nexport default {\n  name: 'VulnerabilityTrend',\n  props: {\n    sbomData: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const chartCanvas = ref(null);\n    const chart = ref(null);\n    const selectedTimeframe = ref('30');\n    const selectedSeverity = ref('all');\n    const vulnerabilityData = computed(() => {\n      if (!props.sbomData || !props.sbomData.components) {\n        return [];\n      }\n      const days = parseInt(selectedTimeframe.value);\n      const data = [];\n      for (let i = 0; i < days; i++) {\n        const date = new Date();\n        date.setDate(date.getDate() - i);\n        const dateStr = date.toISOString().split('T')[0];\n        data.push({\n          date: dateStr,\n          count: Math.floor(Math.random() * 10),\n          // Placeholder - replace with actual data\n          severity: ['critical', 'high', 'medium', 'low'][Math.floor(Math.random() * 4)]\n        });\n      }\n      return data;\n    });\n    const totalVulnerabilities = computed(() => {\n      return vulnerabilityData.value.reduce((sum, item) => sum + item.count, 0);\n    });\n    const fixedVulnerabilities = computed(() => {\n      return Math.floor(totalVulnerabilities.value * 0.3); // Placeholder - replace with actual data\n    });\n    const newVulnerabilities = computed(() => {\n      return Math.floor(totalVulnerabilities.value * 0.1); // Placeholder - replace with actual data\n    });\n    const createChart = () => {\n      if (chart.value) {\n        chart.value.destroy();\n      }\n      if (!window.Chart) {\n        console.error('Chart.js not loaded');\n        return;\n      }\n      const ctx = chartCanvas.value.getContext('2d');\n      const filteredData = vulnerabilityData.value.filter(item => selectedSeverity.value === 'all' || item.severity === selectedSeverity.value);\n      chart.value = new window.Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: filteredData.map(item => item.date),\n          datasets: [{\n            label: 'Vulnerabilities',\n            data: filteredData.map(item => item.count),\n            borderColor: '#2563eb',\n            backgroundColor: 'rgba(37, 99, 235, 0.1)',\n            tension: 0.4,\n            fill: true\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              display: false\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true,\n              ticks: {\n                stepSize: 1\n              }\n            }\n          }\n        }\n      });\n    };\n\n    // Load Chart.js from CDN\n    const loadChartJs = () => {\n      return new Promise(resolve => {\n        if (window.Chart) {\n          resolve();\n          return;\n        }\n        const script = document.createElement('script');\n        script.src = 'https://cdn.jsdelivr.net/npm/chart.js';\n        script.onload = () => resolve();\n        document.head.appendChild(script);\n      });\n    };\n    watch([selectedTimeframe, selectedSeverity], () => {\n      if (window.Chart) {\n        createChart();\n      }\n    });\n    onMounted(async () => {\n      await loadChartJs();\n      createChart();\n    });\n    return {\n      chartCanvas,\n      selectedTimeframe,\n      selectedSeverity,\n      totalVulnerabilities,\n      fixedVulnerabilities,\n      newVulnerabilities\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","computed","name","props","sbomData","type","Object","required","setup","chartCanvas","chart","selectedTimeframe","selectedSeverity","vulnerabilityData","components","days","parseInt","value","data","i","date","Date","setDate","getDate","dateStr","toISOString","split","push","count","Math","floor","random","severity","totalVulnerabilities","reduce","sum","item","fixedVulnerabilities","newVulnerabilities","createChart","destroy","window","Chart","console","error","ctx","getContext","filteredData","filter","labels","map","datasets","label","borderColor","backgroundColor","tension","fill","options","responsive","maintainAspectRatio","plugins","legend","display","scales","y","beginAtZero","ticks","stepSize","loadChartJs","Promise","resolve","script","document","createElement","src","onload","head","appendChild"],"sources":["/Users/sangambiradar/Documents/syft-api/static/vue-frontend/src/components/VulnerabilityTrend.vue"],"sourcesContent":["<template>\n  <div class=\"vulnerability-trend\">\n    <div class=\"chart-header\">\n      <h3>Vulnerability Trends</h3>\n      <div class=\"chart-filters\">\n        <select v-model=\"selectedTimeframe\" class=\"modern-input\">\n          <option value=\"7\">Last 7 Days</option>\n          <option value=\"30\">Last 30 Days</option>\n          <option value=\"90\">Last 90 Days</option>\n          <option value=\"365\">Last Year</option>\n        </select>\n        <select v-model=\"selectedSeverity\" class=\"modern-input\">\n          <option value=\"all\">All Severities</option>\n          <option value=\"critical\">Critical</option>\n          <option value=\"high\">High</option>\n          <option value=\"medium\">Medium</option>\n          <option value=\"low\">Low</option>\n        </select>\n      </div>\n    </div>\n    <div class=\"chart-container\">\n      <canvas ref=\"chartCanvas\"></canvas>\n    </div>\n    <div class=\"chart-summary\">\n      <div class=\"summary-item\">\n        <span class=\"summary-label\">Total Vulnerabilities</span>\n        <span class=\"summary-value\">{{ totalVulnerabilities }}</span>\n      </div>\n      <div class=\"summary-item\">\n        <span class=\"summary-label\">Fixed</span>\n        <span class=\"summary-value\">{{ fixedVulnerabilities }}</span>\n      </div>\n      <div class=\"summary-item\">\n        <span class=\"summary-label\">New</span>\n        <span class=\"summary-value\">{{ newVulnerabilities }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, watch, computed } from 'vue';\n// We're removing the Chart.js import and using the CDN version\n\nexport default {\n  name: 'VulnerabilityTrend',\n  props: {\n    sbomData: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const chartCanvas = ref(null);\n    const chart = ref(null);\n    const selectedTimeframe = ref('30');\n    const selectedSeverity = ref('all');\n\n    const vulnerabilityData = computed(() => {\n      if (!props.sbomData || !props.sbomData.components) {\n        return [];\n      }\n\n      const days = parseInt(selectedTimeframe.value);\n      const data = [];\n\n      for (let i = 0; i < days; i++) {\n        const date = new Date();\n        date.setDate(date.getDate() - i);\n        const dateStr = date.toISOString().split('T')[0];\n\n        data.push({\n          date: dateStr,\n          count: Math.floor(Math.random() * 10), // Placeholder - replace with actual data\n          severity: ['critical', 'high', 'medium', 'low'][Math.floor(Math.random() * 4)]\n        });\n      }\n\n      return data;\n    });\n\n    const totalVulnerabilities = computed(() => {\n      return vulnerabilityData.value.reduce((sum, item) => sum + item.count, 0);\n    });\n\n    const fixedVulnerabilities = computed(() => {\n      return Math.floor(totalVulnerabilities.value * 0.3); // Placeholder - replace with actual data\n    });\n\n    const newVulnerabilities = computed(() => {\n      return Math.floor(totalVulnerabilities.value * 0.1); // Placeholder - replace with actual data\n    });\n\n    const createChart = () => {\n      if (chart.value) {\n        chart.value.destroy();\n      }\n\n      if (!window.Chart) {\n        console.error('Chart.js not loaded');\n        return;\n      }\n\n      const ctx = chartCanvas.value.getContext('2d');\n      const filteredData = vulnerabilityData.value.filter(item => \n        selectedSeverity.value === 'all' || item.severity === selectedSeverity.value\n      );\n\n      chart.value = new window.Chart(ctx, {\n        type: 'line',\n        data: {\n          labels: filteredData.map(item => item.date),\n          datasets: [{\n            label: 'Vulnerabilities',\n            data: filteredData.map(item => item.count),\n            borderColor: '#2563eb',\n            backgroundColor: 'rgba(37, 99, 235, 0.1)',\n            tension: 0.4,\n            fill: true\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              display: false\n            }\n          },\n          scales: {\n            y: {\n              beginAtZero: true,\n              ticks: {\n                stepSize: 1\n              }\n            }\n          }\n        }\n      });\n    };\n\n    // Load Chart.js from CDN\n    const loadChartJs = () => {\n      return new Promise((resolve) => {\n        if (window.Chart) {\n          resolve();\n          return;\n        }\n\n        const script = document.createElement('script');\n        script.src = 'https://cdn.jsdelivr.net/npm/chart.js';\n        script.onload = () => resolve();\n        document.head.appendChild(script);\n      });\n    };\n\n    watch([selectedTimeframe, selectedSeverity], () => {\n      if (window.Chart) {\n        createChart();\n      }\n    });\n\n    onMounted(async () => {\n      await loadChartJs();\n      createChart();\n    });\n\n    return {\n      chartCanvas,\n      selectedTimeframe,\n      selectedSeverity,\n      totalVulnerabilities,\n      fixedVulnerabilities,\n      newVulnerabilities\n    };\n  }\n};\n</script>\n\n<style scoped>\n.vulnerability-trend {\n  background: white;\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: var(--card-shadow);\n}\n\n.chart-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.chart-filters {\n  display: flex;\n  gap: 1rem;\n}\n\n.chart-container {\n  height: 300px;\n  margin-bottom: 1.5rem;\n}\n\n.chart-summary {\n  display: flex;\n  justify-content: space-around;\n  padding: 1rem;\n  background: var(--light-color);\n  border-radius: 8px;\n}\n\n.summary-item {\n  text-align: center;\n}\n\n.summary-label {\n  display: block;\n  font-size: var(--font-size-sm);\n  color: var(--secondary-color);\n  margin-bottom: 0.5rem;\n}\n\n.summary-value {\n  font-size: var(--font-size-xl);\n  font-weight: var(--font-weight-semibold);\n  color: var(--dark-color);\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}